---
import BaseLayout from '../layouts/BaseLayout.astro';
import skillsData from '../data/skills.json';

const categories = Object.entries(skillsData) as [string, string[]][];

/**
 * Replace with your own photo path or URL.
 * Put the file in public/images/profile.jpg
 * Or use a direct URL: 'https://...'
 */
const profilePhoto = '/images/profile.jpg';
---

<BaseLayout
  title="About"
  description="Engineer, builder, and filmmaker. Learn about Anish Zute's background, work, and skills."
>
  <div class="page-top">
    <div class="container">

      <!-- Bio section -->
      <div class="bio-section">
        <div class="bio-text">
          <p class="eyebrow">About me</p>
          <h1>Engineer.<br />Builder.<br />Filmmaker.</h1>
          <div class="bio-body">
            <p>
              I'm Anish — an engineer who builds things that move fast and software that
              helps make sense of the data they generate. My work sits at the intersection
              of mechanical engineering, embedded systems, and creative media.
            </p>
            <p>
              My day-to-day involves designing and fabricating racecars, writing firmware
              and data tools, and whenever the light is right, pointing a camera at
              something worth capturing. I believe the best engineering decisions come from
              deeply understanding the problem — which usually means getting your hands dirty.
            </p>
            <p>
              When I'm not in the shop or at a keyboard, I'm at the track, in the mountains,
              or somewhere without cell service.
            </p>
          </div>
          <div class="bio-ctas">
            <a href="/projects" class="btn btn-primary">See Projects</a>
            <a href="https://github.com/anishzute" target="_blank" rel="noopener noreferrer" class="btn btn-ghost">GitHub →</a>
          </div>
        </div>

        <div class="bio-photo">
          <div class="photo-frame">
            <img
              src={profilePhoto}
              alt="Anish Zute"
              loading="eager"
              decoding="async"
              width="480"
              height="600"
              onerror="this.parentElement.classList.add('no-photo')"
            />
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Skills -->
  <section class="skills-section">
    <div class="container">
      <h2>Skills</h2>
      <div class="skills-grid">
        {categories.map(([category, skills]) => (
          <div class="skill-card">
            <h3 class="skill-category">{category}</h3>
            <ul>
              {skills.map(skill => <li>{skill}</li>)}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .page-top {
    padding-top: calc(var(--nav-h) + 4rem);
    padding-bottom: var(--section-gap);
    border-bottom: 1px solid var(--border);
  }

  /* ── Bio ────────────────────────────────────────────────────── */
  .bio-section {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3.5rem;
    align-items: start;
  }

  @media (min-width: 760px) {
    .bio-section {
      grid-template-columns: 1fr 380px;
      gap: 5rem;
    }
  }

  .eyebrow {
    font-size: 0.78rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.16em;
    color: var(--accent);
    margin-bottom: 1rem;
    max-width: none;
  }

  .bio-text h1 {
    margin-bottom: 1.75rem;
    font-size: clamp(2.2rem, 5vw, 3.5rem);
  }

  .bio-body {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .bio-body p {
    font-size: 1.02rem;
    line-height: 1.78;
    color: var(--text-2);
    max-width: 60ch;
  }

  .bio-ctas {
    display: flex;
    gap: 0.85rem;
    flex-wrap: wrap;
  }

  /* ── Profile photo ──────────────────────────────────────────── */
  .bio-photo {
    order: -1;
  }

  @media (min-width: 760px) {
    .bio-photo {
      order: 0;
      position: sticky;
      top: calc(var(--nav-h) + 2rem);
    }
  }

  .photo-frame {
    border-radius: 8px;
    overflow: hidden;
    background: var(--bg-elevated);
    aspect-ratio: 4/5;
    border: 1px solid var(--border);
  }

  .photo-frame img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* When no image loads, show a gradient placeholder */
  .photo-frame.no-photo {
    background: linear-gradient(145deg, var(--bg-elevated) 0%, var(--border) 100%);
  }

  .photo-frame.no-photo img {
    display: none;
  }

  /* ── Skills ─────────────────────────────────────────────────── */
  .skills-section {
    padding: var(--section-gap) 0;
  }

  .skills-section h2 {
    margin-bottom: 2rem;
  }

  .skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1px;
    background: var(--border);
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
  }

  .skill-card {
    background: var(--bg-raised);
    padding: 1.5rem 1.35rem;
    transition: background 0.2s;
  }

  .skill-card:hover {
    background: var(--bg-elevated);
  }

  .skill-category {
    font-size: 0.72rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--accent);
    margin-bottom: 1rem;
  }

  .skill-card ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .skill-card li {
    font-size: 0.875rem;
    color: var(--text-2);
    padding: 0.4rem 0;
    border-bottom: 1px solid var(--border);
    margin-bottom: 0;
    line-height: 1.4;
  }

  .skill-card li:last-child {
    border-bottom: none;
  }
</style>
