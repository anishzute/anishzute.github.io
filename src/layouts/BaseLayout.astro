---
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description: string;
  canonical?: string;
  ogImage?: string;
}

const { title, description, canonical, ogImage } = Astro.props;
const canonicalURL = canonical ?? new URL(Astro.url.pathname, Astro.site).href;
const siteName = 'Anish Zute';
const fullTitle = title === siteName ? title : `${title} — ${siteName}`;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />

    <title>{fullTitle}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content={siteName} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalURL} />
    {ogImage && <meta property="og:image" content={new URL(ogImage, Astro.site).href} />}

    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" href="/favicon.ico" />

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title={siteName} href="/rss.xml" />

    <!-- Fonts: Inter variable -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,300..900;1,14..32,300..900&display=swap" rel="stylesheet" />
  </head>
  <body>
    <Nav />
    <main id="main-content">
      <slot />
    </main>
    <Footer />
  </body>
</html>

<style is:global>
  /* ── Design tokens ─────────────────────────────────────────────── */
  :root {
    --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'Courier New', Courier, monospace;

    /* Warm dark palette */
    --bg:            #0a0a0a;
    --bg-raised:     #141414;
    --bg-elevated:   #1d1d1d;
    --border:        #252525;
    --border-strong: #363636;

    /* Text */
    --text:          #f0ede8;
    --text-2:        #8e8a85;
    --text-3:        #555250;

    /* Accent — warm amber gold */
    --accent:        #c8a253;
    --accent-dim:    rgba(200, 162, 83, 0.12);
    --accent-hover:  #dbb96a;

    /* Layout */
    --max-w:         1080px;
    --gutter:        clamp(1.25rem, 5vw, 2.5rem);
    --section-gap:   clamp(4rem, 8vw, 7rem);
    --nav-h:         60px;
  }

  /* ── Reset ──────────────────────────────────────────────────────── */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }

  body {
    font-family: var(--font-sans);
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11', 'ss01';
    background: var(--bg);
    color: var(--text);
    line-height: 1.65;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  main {
    flex: 1;
  }

  /* ── Typography ─────────────────────────────────────────────────── */
  h1, h2, h3, h4, h5, h6 {
    line-height: 1.15;
    font-weight: 700;
    letter-spacing: -0.02em;
    color: var(--text);
  }
  h1 { font-size: clamp(2.2rem, 5vw, 3.5rem); }
  h2 { font-size: clamp(1.5rem, 3.5vw, 2.2rem); }
  h3 { font-size: clamp(1.1rem, 2vw, 1.35rem); }
  h4 { font-size: 1rem; font-weight: 600; }

  p {
    max-width: 68ch;
    color: var(--text-2);
  }

  strong { color: var(--text); font-weight: 600; }
  em     { font-style: italic; }

  /* ── Links ──────────────────────────────────────────────────────── */
  a {
    color: var(--accent);
    text-decoration: none;
    transition: color 0.15s;
  }
  a:hover { color: var(--accent-hover); }

  /* ── Images ─────────────────────────────────────────────────────── */
  img, video { max-width: 100%; height: auto; display: block; }

  /* ── Code ───────────────────────────────────────────────────────── */
  code {
    font-family: var(--font-mono);
    font-size: 0.875em;
    background: var(--bg-elevated);
    padding: 0.15em 0.4em;
    border-radius: 4px;
    color: var(--accent);
  }
  pre {
    background: var(--bg-raised);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.25rem;
    overflow-x: auto;
  }
  pre code { background: none; padding: 0; color: var(--text); }

  /* ── Layout utilities ───────────────────────────────────────────── */
  .container {
    max-width: var(--max-w);
    margin: 0 auto;
    padding-left: var(--gutter);
    padding-right: var(--gutter);
  }

  .section {
    padding-top: var(--section-gap);
    padding-bottom: var(--section-gap);
  }

  .section-header {
    margin-bottom: 2.5rem;
  }

  .section-header h2 {
    margin-bottom: 0.5rem;
  }

  .section-header p {
    font-size: 1.05rem;
  }

  /* ── Shared components ──────────────────────────────────────────── */
  .tag {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.07em;
    padding: 0.2em 0.65em;
    border-radius: 3px;
    background: var(--bg-elevated);
    color: var(--text-3);
    border: 1px solid var(--border);
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.65rem 1.5rem;
    border-radius: 5px;
    font-size: 0.9rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s;
    cursor: pointer;
    border: none;
  }

  .btn-primary {
    background: var(--accent);
    color: #0a0a0a;
  }
  .btn-primary:hover {
    background: var(--accent-hover);
    color: #0a0a0a;
    text-decoration: none;
    transform: translateY(-1px);
  }

  .btn-ghost {
    background: transparent;
    color: var(--text);
    border: 1px solid var(--border-strong);
  }
  .btn-ghost:hover {
    background: var(--bg-elevated);
    color: var(--text);
    text-decoration: none;
    border-color: var(--text-3);
  }

  /* ── Misc ───────────────────────────────────────────────────────── */
  hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: 2.5rem 0;
  }

  ul, ol { padding-left: 1.5rem; }
  li { margin-bottom: 0.3rem; }

  blockquote {
    border-left: 3px solid var(--accent);
    padding-left: 1.25rem;
    color: var(--text-2);
    font-style: italic;
    margin: 1.5rem 0;
  }

  ::selection {
    background: var(--accent-dim);
    color: var(--text);
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border-strong); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--text-3); }
</style>
