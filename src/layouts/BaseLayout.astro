---
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description: string;
  canonical?: string;
  ogImage?: string;
}

const { title, description, canonical, ogImage } = Astro.props;
const canonicalURL = canonical ?? new URL(Astro.url.pathname, Astro.site).href;
const siteName = 'Anish Zute';
const fullTitle = title === siteName ? title : `${title} â€” ${siteName}`;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />

    <title>{fullTitle}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content={siteName} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalURL} />
    {ogImage && <meta property="og:image" content={new URL(ogImage, Astro.site).href} />}

    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" href="/favicon.ico" />

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title={siteName} href="/rss.xml" />
  </head>
  <body>
    <Nav />
    <main>
      <slot />
    </main>
    <Footer />
  </body>
</html>

<style is:global>
  :root {
    --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'Courier New', Courier, monospace;

    --color-bg: #0e0e0e;
    --color-surface: #1a1a1a;
    --color-border: #2a2a2a;
    --color-text: #e8e8e8;
    --color-muted: #888;
    --color-accent: #e8c547;
    --color-accent-hover: #f0d060;

    --max-width: 960px;
    --spacing-page: clamp(1rem, 5vw, 3rem);
  }

  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: var(--font-sans);
    background: var(--color-bg);
    color: var(--color-text);
    line-height: 1.65;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
  }

  main {
    flex: 1;
    width: 100%;
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 2.5rem var(--spacing-page);
  }

  a {
    color: var(--color-accent);
    text-decoration: none;
  }

  a:hover {
    color: var(--color-accent-hover);
    text-decoration: underline;
  }

  h1, h2, h3, h4 {
    line-height: 1.2;
    font-weight: 700;
  }

  h1 { font-size: clamp(1.8rem, 4vw, 2.8rem); }
  h2 { font-size: clamp(1.3rem, 3vw, 1.9rem); }
  h3 { font-size: 1.2rem; }

  p { max-width: 70ch; }

  img {
    max-width: 100%;
    height: auto;
    display: block;
  }

  code {
    font-family: var(--font-mono);
    font-size: 0.875em;
    background: var(--color-surface);
    padding: 0.15em 0.4em;
    border-radius: 3px;
  }

  pre {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: 1.25rem;
    overflow-x: auto;
  }

  pre code {
    background: none;
    padding: 0;
  }

  hr {
    border: none;
    border-top: 1px solid var(--color-border);
    margin: 2rem 0;
  }

  ul, ol {
    padding-left: 1.5rem;
  }

  blockquote {
    border-left: 3px solid var(--color-accent);
    padding-left: 1rem;
    color: var(--color-muted);
    font-style: italic;
  }

  .tag {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.2em 0.6em;
    border-radius: 3px;
    background: var(--color-surface);
    color: var(--color-muted);
    border: 1px solid var(--color-border);
  }

  .page-header {
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--color-border);
  }

  .page-header p {
    color: var(--color-muted);
    margin-top: 0.5rem;
    font-size: 1.05rem;
  }
</style>
